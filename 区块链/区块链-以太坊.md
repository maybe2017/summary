## 以太坊

### 一、比特币系统的缺点
1. 交易速度慢，出块时间需要10分钟。
2. 工作量证明算法POW本质上是比拼算力，耗电。
3. 仅仅完成了货币的去中心化。现实生活中的约束、如合同这些概念，并没有完成去中心化。

### 二、以太坊的解决办法
1. 加快了交易速度，15s出块。[高并发产生块，导致链分叉多]
2. 共识算法采用POW + POS混合，逐步向POS算法过渡。
3. 智能合约，即将现实中`合同`的概念，用一段不可更改的代码描述，并进行公示，即合约也会去中心化。
    ```
    1. 合约中描述了一系列规则，如果违反，会进行处罚，比如扣保证金。
    2. 合约公开、透明、无黑幕，且屏蔽了各方游戏规则的不一致性。
    ```
### 三、到底是什么？
1. `以太坊平台`是一个软件，可类比为Android系统
2. 智能合约小程序，可类比为Android系统上的APP软件。即`以太坊平台软件` 承载着各种`智能合约小程序的发布、使用`。 
3. 修改以太坊平台中的数据，会产生手续费，查询不需要。[根据网络是否拥堵gas油费价格会浮动]
4. 每一次交易，即更改数据都会收取手续费，那么一定程度上避免了恶意篡改数据的行为。
    ```
    1. Google浏览器中安装metamask插件
    2. 账号密码是12个单词，可以创建多个账户。
    ```
### 智能合约的适用业务场景
1. 适合规则明确，不受主观因素影响的业务。如依靠人为主观判断的，如保险理赔的业务场景，目前是没办法用智能合约实现的。
2. 业务规则经常变化，此类业务也不适合用智能合约去表达；因为第一版小程序一旦发布，就无法进行更改。

### 出快速度快的缺点及Ghost协议的引出
1. 出快速度快，导致可能同一时间产生多个块，那么产生了多条分叉，如果用BitCoin系统那套`信任最长链`的标准，那么系统中往往，地理位置好能快速连通节点数多、算力强的那部分用户，就会长期维持`最长区块链`，导致富则越富，穷则越穷的情况。
    ```
    // 问题
    1. 假定现在主链上存在区块0、1、2，3区块优先被A节点获得，并立即在系统中广播了出去，
    2. 在3区块的信息在15s内，可能未扩散到全区块网络，那么未收到信息的节点就会继续挖取3区块
    3. A节点继续挖取第4号区块，但挖取的过程中，陆续收到其他节点挖取3区块成功的通知[3B、3C、3D、3F]，A很紧张，他必须尽快挖取成功4号区块，来证明之前的3号区块是他先挖取成功的。
    ```
2. Ghost协议：新挖出的区块，可以对`叔叔辈分叉[始祖区块]` 进行`招安`，向前招安的范围是8辈之内，每次仅能招安2个分叉块
    ```
    // 解决
    1. A挖出4号区块之后，以太坊规定出块奖励为`3个以太币`。
    2. A会立刻广播，收到广播的叔叔辈分叉[始祖块-3B、3C]，会立刻停止继续在当前分叉挖取；[分叉会快速合并到主分支]
    3. 因为系统会按辈份，分给3B、3C各自 `7/8 * 出块奖励`。
    4. A还会额外收到 `2 * 1/32 * 出块奖励`。
    5. 如果主分支的5号区块被挖出，那么它也可以来招安，招安`3D、3F`，3D、3F此时仅能获取到 `6/8 * 出块奖励`。
    ```