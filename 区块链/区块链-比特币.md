## 区块链

### 一、区块链是什么？
1. 区块链就是账本，每一个区块记载着交易交易数据。[交易身份信息会被Hash加密]
2. 区块如何生存的呢？每一次都需要计算机算力胜出，胜出者才有`记账权利`。
3. 比特币系统就是一个分布式的账本系统：区块记录交易过程，再由分布式系统中的节点，广播到网络，使其余节点数据一致。
   ```
   1. 去中心化并不是没有中心，而是中心不停的变化，每一次的中心都是由分布式系统中的节点竞争胜利而得出。
   2. 挖矿成功，即取得记账权，才叫矿工。
   ```
### 二、区块链1.0涉及到的技术点
1. 分布式数据存储
2. 点对点通信
3. 共识算法[pow算法保证账本的一致性]
4. 加密算法

### 三、双花问题
1. A用同一宝石进行了两笔交易，第一笔交易可以由任意人取得区块，并进行交易记录。但第二笔属于伪造交易，必须是A自己拿到区块，进行记录。此时区块链会在此分叉。
2. 区块链系统仅承认`最长链条为可信任链`[主链]；如果有人者伪造了账本，造成了区块分叉，如果需要系统承认这个伪造区块，A必须想办法使分叉链比主链长!!
3. 伪造账本几乎不可能，因为需要A每一次都获取到记账权[pow]，即计算机的算力胜出其他所有人!!

## 比特币

### 一、POW算法-工作量证明
1. 系统会计算一个hash值。
2. Nonce为自动累计次数，表示挖矿尝试的次数。[算力强的电脑单位时间内尝试的Nonce值较多]
3. 基于Nonce值与账本信息，计算出的hash值，必须比系统给出的hash值小，这样才算本次挖矿成功，即获取到区块的记账权。

### 二、硬分叉[因为比特币系统升级造成的 - 无法合并]
1. 区块的扩容。
   ```
   1. 已知之前的区块大小为1M，系统每笔交易耗费时间为10分钟，单笔交易的数据占250字节。
   2. 那么可计算出，1M大小的区块一共可存储交易数目：1M / 250B = 4194笔
   3. 平均每秒的交易数：4194 / 600s = 7笔
   4. 如果区块从1M扩容到8M，那么每秒的交易次数就达到了56笔
   ```
2. 不进行区块扩容的用户，无法认可8M的区块，所以链上不会有8M的区块，一直全是1M的区块。[比特币]
3. 已经扩容的用户，1M与8M的区块都认可，链上两种区块都可以存在。[比特币现金]

### 三、软分叉[如双花攻击类的数据篡改 - 可合并]